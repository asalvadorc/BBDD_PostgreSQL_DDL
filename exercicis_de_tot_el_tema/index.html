<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/asalvadorc/BBDD_POSTGRES_DDL/exercicis_de_tot_el_tema/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Exercicis del tot el tema - BD - Bases de Dades</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
        <link href="../img/favicon.ico" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Exercicis del tot el tema";
        var mkdocs_page_input_path = "exercicis_de_tot_el_tema.md";
        var mkdocs_page_url = "/asalvadorc/BBDD_POSTGRES_DDL/exercicis_de_tot_el_tema/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../assets/logocaminas.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">POSTGRESQL - DDL</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../1_introducci/">1. Introducció</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_ddl/">2. DDL</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Exercicis del tot el tema</a>
    <ul class="current">
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">BD - Bases de Dades</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">POSTGRESQL - DDL</li>
      <li class="breadcrumb-item active">Exercicis del tot el tema</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="exercicis-de-tot-el-tema">Exercicis de tot el tema</h1>
<p>Al llarg d'aquesta tercera part, en el conjunt d'exercicis de DDL, crearem
tota l'estructura de la Base de Dades <strong>FACTURA</strong> , però per a no interferir
cadascú amb els altres companys, cadascú es connectarà a la seua Base de Dades
<strong>factura_local</strong>.</p>
<p>L'esquema Entitat-Relació i l'esquema relacional que implementarem serà el
següent:</p>
<p><img alt="" src="../factura.png" /></p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Durant tots aquestos exercicis de DDL pot ser molt convenient tenir obertes
  les dues connexions: la de <strong>FACTURA</strong> (per anar consultant) i la de
  <strong>factura_local</strong> (per anar creant i modificant).</p>
</div>
<p><strong>Ex_1</strong> - Creeu la taula <strong>CATEGORIA</strong> , amb els mateixos camps i del mateix
tipus que en la taula CATEGORIA de <strong>FACTURA</strong> , però de moment sense clau
principal ni cap altra restricció. </p>
<p><strong>Ex_2</strong> - Creeu la taula <strong>ARTICLE</strong> , també sense restriccions.</p>
<p><strong>Ex_3</strong> - Crear la taula <strong>PROVINCIA</strong> , amb la clau principal.</p>
<p><strong>Ex_4</strong> - Crear la taula <strong>POBLE</strong> , amb la clau principal i la restricció que
el camp <strong>cod_pro</strong> és clau externa que apunta a PROVINCIA.</p>
<p><strong>Ex_5</strong> - Crear la taula <strong>VENEDOR</strong> , amb la clau principal i la clau externa
a POBLE (de moment no definim la clau externa a VENEDOR, que és reflexiva).</p>
<p><strong>Ex_6</strong> - Crear la taula <strong>CLIENT</strong> , amb la clau principal i la clau externa a
POBLE</p>
<p><strong>Ex_7</strong> - Crear la taula <strong>FACTURA</strong> , amb la clau principal i les claus
externes a CLIENT i VENEDOR. També heu d'exigir que <strong>cod_cli</strong> siga no nul.</p>
<p><strong>Ex_8</strong> - Crear la taula <strong>LINIA_FAC</strong> , amb la clau principal (observa que
està formada per 2 camps) però de moment sense la clau externa que apunta a
ARTICLE. A més <strong>cod_a</strong> ha de ser no nul.</p>
<p><strong>Ex_9</strong> - Afegir un camp a la taula <strong>VENEDOR</strong> anomenat <strong>alies</strong> de tipus
text, que ha de ser no nul i únic.</p>
<p><strong>Ex_10</strong> - Esborrar el camp anterior, <strong>alies</strong> , de la taula <strong>VENEDOR</strong>.</p>
<p><strong>Ex_11</strong> - Afegir la clau principal de <strong>CATEGORIA</strong>.</p>
<p><strong>Ex_12</strong> - En la taula <strong>ARTICLE</strong> afegir la clau principal i la clau externa a
CATEGORIA.</p>
<p><strong>Ex_13</strong> - En la taula <strong>LINIA_FAC</strong> afegir la clau externa que apunta a
FACTURA, <strong>exigint que s'esborre en cascada</strong> (si s'esborra una factura,
s'esborraran automàticament les seues línies de factura). I també la clau
externa que apunta a ARTICLE (aquesta normal, és a dir NO ACTION)</p>
<p><strong>Ex_14</strong> - Afegir un índex anomenat <strong>i_nom_cli</strong> a la taula <strong>CLIENT</strong> pel camp
<strong>nom</strong>.</p>
<p><strong>Ex_15</strong> - Afegir un índex anomenat<strong>i_adr_ven</strong> a la taula <strong>VENEDOR</strong> per a
que estiga ordenat per <strong>cp</strong> (ascendent) i <strong>adreca</strong>(descendent).</p>
<p><strong>Ex_16</strong> - Crear la vista <strong>RESUM_FACTURA</strong> , que ens dóne el total dels diners
de la factura, el total després del descompte d'articles, i el total després
del descompte de la factura, tal i com teníem en la consulta <strong>6.56</strong>. A
partir d'aquest moment podrem utilitzar la vista per a traure aquestos
resultats</p>
<p><strong>Ex 17</strong> - Crear la vista RESUM_VENEDOR, on aparega informació del nom del venedor, del nombre total d'articles venuts i de l'import total facturat.</p>
<p><strong>Ex 18</strong> - Crear la vista RESUM_CATEGORIAS, on aparega informació del nom de la categoria, del nombre total d'articles venuts i de l'import total facturat.</p>
<p><strong>Ex 19</strong> - Tenim creada la taula VENEDOR i es desitja que la clau principal siga una seqüència autonumérica personalitzada. 
Observa la informació actual en la taula VENEDOR de la BD factura i analitza quina seqüència s'ha utilitzat.</p>
<p><img alt="" src="../Ex_18.png" /></p>
<ul>
<li>A continuació realitza la inserció d'un registre en aquesta taula tenint en compte la seqüència creada, per a comprovar que funciona.</li>
<li>Finalment elimina els objectes creats. </li>
<li>Escriu les sentències en l'ordre adequat</li>
</ul>
<p><strong>Ex 20</strong> - Volem crear una nova taula CLIENT2 i es vol que la clau principal siga una seqüència personalitzada autonumerica. 
Observa la informació actual en la taula CLIENT de la BD factura i analitza quina seqüència s'hauria de utilitzat.</p>
<p><img alt="" src="../Ex_20.png" /></p>
<ul>
<li>Has de tindre en compte que al crear la taula CLIENT2 perquè el camp cod_cli, per defecte sempre agafe el valor següent de la seqüència definida anteriorment. </li>
<li>A continuació realitza la inserció d'un registre en aquesta taula tenint en compte els canvis realitzats en la base de dades. </li>
<li>Finalment elimina els objectes creats. 
Escriu les sentències en l'ordre adequat.</li>
</ul>
<p><strong>Ex 21</strong> - En la taula FACTURA2 es vol que la clau principal siga una seqüència autonumérica en sèrie.</p>
<ul>
<li>Crea la taula FACTURA2 perquè el camp num_f utilitze una seqüència en sèrie.</li>
<li>A més has de tindre en compte que el iva de la factura solament pot ser el 10 o el 21 i que el descompte la factura ha de ser inferior a 50.</li>
<li>A continuació realitza la inserció d'un registre en aquesta taula per a comprovar que funciona.</li>
<li>Finalment elimina els objectes creats.</li>
<li>Escriu les sentències en l'ordre adequat.</li>
</ul>
<p><strong>Ex 22</strong> - Crea la taula ARTICLE2 tenint en compte el següent;</p>
<ul>
<li>Comprovar que el preu, stock i stock_min no és negatiu</li>
<li>Crear un tipus de dades per a l'estat d'un article, que pot prendre els valors "Disponible", "Esgotat" o "En espera".</li>
<li>
<p>Crea un tipus de dada per a registrar el codi de barres EAN-13 d'un article. Tenint en compte que el codi de barres EAN-13 s'observen 3 parts:</p>
<ul>
<li>País de procedència: són els dos o tres primers dígits i, en el cas d'Espanya, aquest prefix és el 84.</li>
<li>Codi del producte: següents 9 o 10 dígits.</li>
<li>Dígit de control: és un sol número, l'últim, i serveix per a corroborar que el codi és correcte.</li>
</ul>
</li>
<li>
<p>Comprovar que stock no pot ser inferior a stock _min (HAS DE DEFINIR UNA CONSTRAINT)</p>
</li>
<li>A continuació realitza la inserció d'un registre en aquesta taula per a comprovar que funciona..</li>
<li>Finalment elimina els objectes creats.</li>
<li>Escriu les sentències en l'ordre adequat.</li>
</ul>
<!--
**Ex_17** Inserir en la taula **CATEGORIA** les següents files:

**cod_cat** | **descripcio**  
---|---  
BjcOlimpia | Components Bjc Seria Olimpia  
Legrand | Components marca Legrand  
IntMagn | Interruptor Magnetotérmico  
Niessen | Components Niesen Serie Lisa  

**Ex_18** Inserir els següents articles.

**cod_art** | **descrip** | **preu** | **stock** | **stock_min** | **cod_cat**  
---|---|---|---|---|---  
B10028B | Cruzamiento Bjc Serie Olimpia | 4.38 | 2 | 1 | BjcOlimpia  
B10200B | Cruzamiento Bjc Olimpia Con Visor | 0.88 | 29 |  | BjcOlimpia  
L16550 | Cartucho Fusible Legrand T2 250 A | 5.89 | 1 | 1 | Legrand  
L16555 | Cartucho Fusible Legrand T2 315 A | 5.89 | 3 | 3 | Legrand  
IM2P10L | Interruptor Magnetotermico 2p, 4 | 14.84 | 2 | 1 | IntMagn  
N8008BA | Base Tt Lateral Niessen Trazo Bla | 4.38 | 6 | 6 | Niessen  

**Ex_19** Inserir en la taula **CLIENT** tres files amb les següents dades

**cod_cli** | **nom** | **adreca** | **cp** | **cod_pob**  
---|---|---|---|---  
303 | MIRAVET SALA, MARIA MERCEDES | URBANIZACION EL BALCO, 84-11 |  |   
306 | SAMPEDRO SIMO, MARIA MERCEDES | FINELLO, 161 | 12217 |   
387 | TUR MARTIN, MANUEL FRANCISCO | CALLE PEDRO VIRUELA, 108-8 | 12008 |   

**Ex_20** Inserir la següent factura:

**num_f** | **data** | **cod_cli** | **cod_ven** | **iva** | **dte**  
---|---|---|---|---|---  
6535 | 2015-01-01 | 306 |  | 21 | 10  

**num_f** | **num_l** | **cod_art** | **quant** | **preu** | **dte**  
---|---|---|---|---|---  
6535 | 1 | L16555 | 2 | 5.89 | 25  

**Ex_21** Inserir la següent factura (aquesta té més d'una línia de factura).

**num_f** | **data** | **cod_cli** | **cod_ven** | **iva** | **dte**  
---|---|---|---|---|---  
6559 | 2015-02-16 | 387 |  | 10 | 10  

**num_f** | **num_l** | **cod_art** | **quant** | **preu** | **dte**  
---|---|---|---|---|---  
6559 | 1 | IM2P10L | 3 | 14.84 |   
6559 | 2 | N8008BA | 6 | 4.38 | 20  

**Ex_22** Esborrar la factura **6559**. Comprovar que també s'han esborrat les
seues línies de factura

**Ex_23** Esborrar els articles dels quals **no** tenim**stock mínim**.

**Ex_24** Llevar tots els codis postals dels clients.

**Ex_25** Pujar el preu dels articles de la categoria **BjcOlimpia** un **5%**
(el resultat serà que l'únic article d'aquesta categoria haurà passat d'un
preu de 4.38 a **4.60€**)
-->

<p>Llicenciat sota la  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Llicència Creative Commons Reconeixement NoComercial
CompartirIgual 3.0</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../2_ddl/" class="btn btn-neutral float-left" title="2. DDL"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../2_ddl/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
